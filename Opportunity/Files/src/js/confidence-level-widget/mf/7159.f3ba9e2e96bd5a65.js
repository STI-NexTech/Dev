(self.webpackChunkapp_studio_enterprise_confidence_level_widget=self.webpackChunkapp_studio_enterprise_confidence_level_widget||[]).push([[7159,3308,927,8546,6165,2832,451,8070,5689,4260,3188],{27159:(A,y,n)=>{n.r(y),n.d(y,{AcademyHelpApiModule:()=>f,AcademyHelpLinkRequest:()=>x,AcademyHelpLinkRequestHandler:()=>C,AcademyService:()=>l});var c=n(5960),H=n(40297),o=n(38495),h=n(73308),p=n(96590),r=n(59131),d=n(21018),m=n(10850),u=n(62278),s=n(36486),a=n(29957);class l{get contextService(){return this._contextService===void 0&&(this._contextService=this._injector.get(d.CONTEXT_SERVICE_TOKEN,null)),this._contextService}constructor(e,t,i){this._modelGenerator=e,this._window=t,this._injector=i,this._schemaName="AcademyUrlData"}_createAcademyHelpUrlDataItem(e){return{configurationVersion:e.ConfigurationVersion,contextHelpCode:e.Code,contextHelpId:e.ContextHelpId,enableContextHelp:e.EnableContextHelp,lmsUrl:e.LMSUrl,productEdition:e.ProductEdition,useLmsDocumentation:e.UseLmsDocumentation}}_getSchemaColumns(){return["ContextHelpId","EnableContextHelp","Code","ProductEdition","ConfigurationVersion","UseLmsDocumentation","LMSUrl"]}_createDataSourceParameters(e){return[{type:o.ModelParameterType.Filter,value:this._getContextHelpCodeFilter(e)}]}_getContextHelpCodeFilter(e){return new o.CompareFilter(o.ComparisonType.Equal,new o.ColumnExpression({columnPath:"Code"}),new o.ParameterExpression({value:e}))}_getAcademyHelpUrlData(e){return this._modelGenerator.generateOne({type:"crt.EntityDataSource",config:{entitySchemaName:this._schemaName}},"").pipe((0,s.switchMap)(t=>t.load({attributes:this._getSchemaColumns(),parameters:e})),(0,s.map)(t=>t.length===1?this._createAcademyHelpUrlDataItem(t[0]):null))}_buildUrl(e){let t="#";return e&&(t=e.useLmsDocumentation?this._getLmsDocumentationUrl(e):a.String.empty),t}_getLmsDocumentationUrl(e){const t=[],i=e.productEdition;i&&t.push("product="+encodeURIComponent(i));const _=e.configurationVersion;_&&t.push("ver="+encodeURIComponent(_));const S=e.enableContextHelp,v=e.contextHelpId;return S&&v&&t.push("id="+encodeURIComponent(v)),`${e.lmsUrl}?${t.join("&")}`}getAcademyHelpUrl(e){if(e===a.String.empty)return(0,u.of)(a.String.empty);const t=this._createDataSourceParameters(e);return this._getAcademyHelpUrlData(t).pipe((0,s.map)(i=>i?this._buildUrl(i):a.String.empty))}openContextHelp(){const e=this.contextService;if(!e)throw new Error(`${d.CONTEXT_SERVICE_TOKEN.toString()} was not provided`);const t=e.getContextCode();this.getAcademyHelpUrl(t).subscribe(i=>{this._window.open(i)})}static{this.\u0275fac=function(t){return new(t||l)(r.\u0275\u0275inject(m.ModelGenerator),r.\u0275\u0275inject(p.WINDOW_TOKEN),r.\u0275\u0275inject(r.Injector))}}static{this.\u0275prov=r.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"})}}let x=class extends o.BaseRequest{};x=(0,c.__decorate)([(0,o.CrtRequest)({type:"crt.AcademyHelpLinkRequest"})],x);let C=class extends o.BaseRequestHandler{constructor(e,t){super(),this._window=e,this._academyHelpUrlService=t}_getAcademyHelpUrl(e){return this._academyHelpUrlService.getAcademyHelpUrl(e)}_openUrl(e){e&&this._window.open(e,"_blank")}handle(e){var t=this;return(0,h.A)(function*(){const i=e.contextHelpCode;return i&&t._getAcademyHelpUrl(i).subscribe(_=>t._openUrl(_)),t.next?.handle(e)})()}};C=(0,c.__decorate)([(0,o.CrtRequestHandler)({type:"crt.AcademyHelpLinkRequestHandler",requestType:"crt.AcademyHelpLinkRequest"}),(0,c.__param)(0,(0,o.CrtInject)(p.WINDOW_TOKEN)),(0,c.__metadata)("design:paramtypes",[Window,l])],C);let f=class g{static{this.\u0275fac=function(t){return new(t||g)}}static{this.\u0275mod=r.\u0275\u0275defineNgModule({type:g})}static{this.\u0275inj=r.\u0275\u0275defineInjector({imports:[H.CommonModule]})}};f=(0,c.__decorate)([(0,o.CrtModule)({requestHandlers:[C]})],f),function(){(typeof ngJitMode>"u"||ngJitMode)&&r.\u0275\u0275setNgModuleScope(f,{imports:[H.CommonModule]})}()},73308:(A,y,n)=>{n.d(y,{A:()=>H});function c(o,h,p,r,d,m,u){try{var s=o[m](u),a=s.value}catch(l){p(l);return}s.done?h(a):Promise.resolve(a).then(r,d)}function H(o){return function(){var h=this,p=arguments;return new Promise(function(r,d){var m=o.apply(h,p);function u(a){c(m,r,d,u,s,"next",a)}function s(a){c(m,r,d,u,s,"throw",a)}u(void 0)})}}}}]);
