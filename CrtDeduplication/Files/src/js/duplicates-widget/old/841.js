"use strict";(self.webpackChunkapp_studio_enterprise_duplicates_widget=self.webpackChunkapp_studio_enterprise_duplicates_widget||[]).push([[841],{21841:(q,_,s)=>{s.r(_),s.d(_,{TableCellWrapperComponent:()=>u,TableComponent:()=>g,TableModule:()=>w,TreeTableComponent:()=>C});var m=s(10194),S=s(52067),h=s(66900),t=s(99314),c=s(31243),p=s(22029),f=s(44537),i=s(9204),x=s(23596),b=s(76696),R=s(26182),y=s(28498);const k=["tableCell"];class u{constructor(){this.valueChange=new t.EventEmitter}_generateTableCell(e){this.tableCell.clear();const n=this.tableCell.createComponent(e),a=n.instance;if(e!==i.UQ&&!(a instanceof i.XI))throw new TypeError("Value of property `cellComponentClass` must be a component class inherited from `BaseTableCellComponent`");return n}_updateTableCell(){const e=this.columnDataSchema.cellComponentClass||i.UQ;(!this._cellComponentRef||!(this._cellComponentRef.instance instanceof e))&&(this._cellComponentRef=this._generateTableCell(e));const n=this._cellComponentRef.instance;n.columnDataSchema=this.columnDataSchema,n.record=this.record,n.eventHandlers=this.eventHandlers,n instanceof i.Py&&n.valueChange.subscribe(a=>this.valueChange.emit(a)),this._cellComponentRef.changeDetectorRef.detectChanges()}ngOnChanges(e){!this.record||!this.columnDataSchema||!(e.record||e.columnDataSchema||e.eventHandlers&&!(0,x.A)(e.eventHandlers.previousValue,e.eventHandlers.currentValue))||this._updateTableCell()}static{this.\u0275fac=function(n){return new(n||u)}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:u,selectors:[["ts-table-cell-wrapper"]],viewQuery:function(n,a){if(1&n&&t.\u0275\u0275viewQuery(k,7,t.ViewContainerRef),2&n){let l;t.\u0275\u0275queryRefresh(l=t.\u0275\u0275loadQuery())&&(a.tableCell=l.first)}},inputs:{columnDataSchema:"columnDataSchema",record:"record",eventHandlers:"eventHandlers"},outputs:{valueChange:"valueChange"},features:[t.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["tableCell",""]],template:function(n,a){1&n&&t.\u0275\u0275element(0,"span",null,0)},encapsulation:2})}}const D=()=>["expandableRow"];function E(o,e){if(1&o){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",11)(1,"mat-checkbox",12),t.\u0275\u0275listener("change",function(l){t.\u0275\u0275restoreView(n);const r=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(l?r.allRowsSelectToggle():null)}),t.\u0275\u0275elementEnd()()}if(2&o){const n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(),t.\u0275\u0275styleProp("visibility",n.showSelectAllButton&&!n.isEmpty()?"visible":"hidden"),t.\u0275\u0275property("checked",n.isAllRowsCheckboxChecked())("indeterminate",n.isAllRowsCheckboxIntermediate())}}function V(o,e){1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,E,2,4,"th",10),t.\u0275\u0275elementContainerEnd())}function H(o,e){if(1&o){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",13)(1,"mat-checkbox",14),t.\u0275\u0275listener("click",function(l){const r=t.\u0275\u0275restoreView(n).$implicit,d=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(d.onCheckboxClick(r,l))})("change",function(){const l=t.\u0275\u0275restoreView(n).$implicit,r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.recordSelectToggle(l))}),t.\u0275\u0275elementEnd()()}if(2&o){const n=e.$implicit,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275property("checked",a.isRecordSelected(n))}}function I(o,e){1&o&&t.\u0275\u0275element(0,"th",16)}function A(o,e){1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,I,1,0,"th",15),t.\u0275\u0275elementContainerEnd())}function B(o,e){if(1&o){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",17)(1,"button",18),t.\u0275\u0275listener("click",function(l){const r=t.\u0275\u0275restoreView(n).$implicit,d=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(d.toggleRowExpansion(r,l))}),t.\u0275\u0275element(2,"mat-icon",19),t.\u0275\u0275elementEnd()()}if(2&o){const n=e.$implicit,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275property("@rowExpanderTrigger",a.isRecordExpanded(n)?"expanded":"collapsed"),t.\u0275\u0275advance(),t.\u0275\u0275property("ngClass","row-expander-icon "+(a.isRecordExpanded(n)?"expanded":"collapsed"))}}function P(o,e){if(1&o&&(t.\u0275\u0275elementStart(0,"th",22)(1,"label"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),2&o){const n=t.\u0275\u0275nextContext(3).$implicit,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("disabled",!a.isColumnSortable(n))("ngClass",a.getColumnHeaderCssClass(n.valueType,n.span)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(n.caption)}}function F(o,e){1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,P,3,3,"th",21),t.\u0275\u0275elementContainerEnd())}function O(o,e){if(1&o){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",23)(1,"ts-table-cell-wrapper",24),t.\u0275\u0275listener("valueChange",function(l){const r=t.\u0275\u0275restoreView(n).$implicit,d=t.\u0275\u0275nextContext(2).$implicit,T=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(T.onCellValueChange(r,d,l))}),t.\u0275\u0275elementEnd()()}if(2&o){const n=e.$implicit,a=t.\u0275\u0275nextContext().$implicit,l=t.\u0275\u0275nextContext().$implicit,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",r.getValueTypeCssClass(l.valueType)),t.\u0275\u0275advance(),t.\u0275\u0275property("columnDataSchema",l)("record",n)("eventHandlers",r.eventHandlers&&r.eventHandlers[a])}}function M(o,e){if(1&o&&(t.\u0275\u0275elementContainerStart(0,2),t.\u0275\u0275template(1,F,2,0,"ng-container",3)(2,O,2,4,"td",8),t.\u0275\u0275elementContainerEnd()),2&o){const n=e.$implicit,a=t.\u0275\u0275nextContext(3);t.\u0275\u0275propertyInterpolate("matColumnDef",n),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",a.showHeader)}}function N(o,e){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,M,3,2,"ng-container",20),t.\u0275\u0275elementContainerEnd()),2&o){const n=e.$implicit;t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",n.name)}}function $(o,e){if(1&o&&(t.\u0275\u0275elementStart(0,"td",23)(1,"div",25),t.\u0275\u0275element(2,"ts-table-cell-wrapper",26),t.\u0275\u0275elementEnd()()),2&o){const n=e.$implicit,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass","expandable-cell-"+(a.isRecordExpanded(n)?"expanded":"collapsed")),t.\u0275\u0275attribute("colspan",a.columns.length),t.\u0275\u0275advance(),t.\u0275\u0275property("@expandableRowTrigger",a.isRecordExpanded(n)?"expanded":"collapsed"),t.\u0275\u0275advance(),t.\u0275\u0275property("columnDataSchema",a.dataSchema.expandableRow)("record",n)("eventHandlers",a.eventHandlers&&a.eventHandlers[a.dataSchema.expandableRow.name])}}function L(o,e){1&o&&t.\u0275\u0275element(0,"tr",28)}function W(o,e){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,L,1,0,"tr",27),t.\u0275\u0275elementContainerEnd()),2&o){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275property("matHeaderRowDef",n.columns)("matHeaderRowDefSticky",n.headerSticky)}}function Q(o,e){if(1&o){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr",29),t.\u0275\u0275listener("click",function(){const l=t.\u0275\u0275restoreView(n).$implicit,r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.onRowClick(l))})("dblclick",function(){const l=t.\u0275\u0275restoreView(n).$implicit,r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.onRowDoubleClick(l))}),t.\u0275\u0275elementEnd()}if(2&o){const n=e.$implicit,a=e.even,l=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",l.getRowCssClass(n,a))("cdkDragData",n)("cdkDragBoundary",l.dragBoundarySelector)("cdkDragDisabled",!l.enableOrdering)}}function G(o,e){1&o&&t.\u0275\u0275element(0,"tr",31)}function j(o,e){1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,G,1,0,"tr",30),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(),t.\u0275\u0275property("matRowDefColumns",t.\u0275\u0275pureFunction0(1,D)))}function K(o,e){if(1&o){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"table",1),t.\u0275\u0275listener("matSortChange",function(l){t.\u0275\u0275restoreView(n);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onSortChange(l))})("cdkDropListDropped",function(l){t.\u0275\u0275restoreView(n);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onItemDrop(l))}),t.\u0275\u0275elementContainerStart(1,2),t.\u0275\u0275template(2,V,2,0,"ng-container",3)(3,H,2,1,"td",4),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(4,2),t.\u0275\u0275template(5,A,2,0,"ng-container",3)(6,B,3,2,"td",5),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275template(7,N,2,1,"ng-container",6),t.\u0275\u0275elementContainerStart(8,7),t.\u0275\u0275template(9,$,3,6,"td",8),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275template(10,W,2,2,"ng-container",3)(11,Q,1,4,"tr",9)(12,j,2,2,"div",3),t.\u0275\u0275elementEnd()}if(2&o){const n=t.\u0275\u0275nextContext();t.\u0275\u0275styleProp("display",n.isEmpty()?"none":null),t.\u0275\u0275property("dataSource",n.dataSource)("matSortDirection",n.sortDirection)("matSortActive",n.sortColumn)("cdkDropListDisabled",!n.enableOrdering)("trackBy",n.trackByFunction),t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("matColumnDef",n.getMultiSelectColumnName()),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",n.showHeader),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("matColumnDef",n.getRowExpanderColumnName()),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",n.showHeader),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",n.dataSchema.columns),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.showHeader),t.\u0275\u0275advance(),t.\u0275\u0275property("matRowDefColumns",n.columns),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",n.dataSchema.expandableRow)}}const Z=["headerSticky","selectMode","showHeader","showSelectAllButton","allRowsSelectState","allRowsSelectToggleHandler","sortable","sortColumn","sortDirection","selectedRowCssClass","evenRowCssClass","minWidthPerColumn"],z={selectMode:"none",headerSticky:!1,showHeader:!0,showSelectAllButton:!0,sortable:!0,sortColumn:"",sortDirection:"asc",selectedRowCssClass:"selected",evenRowCssClass:"even-row",minWidthPerColumn:120};class g{get filteredData(){return this.dataSource?this.dataSource.filteredData:[]}get dataSchema(){return this._dataSchema}set dataSchema(e){this._dataSchema=e;const n={};e&&e.columns.forEach(a=>{n[a.name]=a}),this.columnsDataSchema=n,this.markForCheck()}get dataColumns(){const e=this.dataSchema;return e&&e.columns?e.columns.map(n=>n.name):[]}get columns(){const e=this.dataColumns;return"multi"===this.selectMode&&e.unshift(this.getMultiSelectColumnName()),this.dataSchema.expandableRow&&("start"===this.rowExpanderPosition&&e.unshift(this.getRowExpanderColumnName()),"end"===this.rowExpanderPosition&&e.push(this.getRowExpanderColumnName())),e}get selected(){const e=this.selection.selected;return this.data.filter(n=>e.includes(this.trackRecord(n)))}set selected(e){this.deselectRedundant();const n=this.trackRecords(e);if(this.deselectExcluding(...n||[]),n){const a=this.trackRecordsAreInTable(n);this.selection.select(...a)}}get expanded(){const e=this.expansion.selected;return this.data.filter(n=>e.includes(this.trackRecord(n)))}set expanded(e){this.collapseRedundant();const n=this.trackRecords(e);if(this.collapseExcluding(...n||[]),n){const a=this.trackRecordsAreInTable(n);this.expansion.select(...a)}}set sort(e){e=e||{},this.sortColumn=e.columnName,this.sortDirection=e.direction}set matSort(e){this._matSort===e||!this._dataSource||!e||(this._matSort=e,this.dataSource.sort=e)}set data(e){e=e||[],this._dataSource||this.initDataSource(),this.dataSource.data=e}get data(){return this.dataSource&&this.dataSource.data||[]}set dataSource(e){this.initDataSource(e)}get dataSource(){return this._dataSource}get eventHandlers(){return this._eventHandlers}set eventHandlers(e){this._eventHandlers=e,this.markForCheck()}set config(e){e=e||{};const n=this._config;this._config=e,(0,x.A)(e,n)||this._applyConfig(e)}constructor(e){this.changeDetectorRef=e,this.selection=new S.CB(!0,[]),this.expansion=new S.CB(!0,[]),this.dataValueType=f.DataValueType,this.cellValueChange=new t.EventEmitter,this.enableOrdering=!1,this.rowExpanderPosition="end",this.selectedChange=new t.EventEmitter,this.sortChange=new t.EventEmitter,this.expandedChange=new t.EventEmitter,this.recordPositionChange=new t.EventEmitter,this.rowDoubleClick=new t.EventEmitter,this.getColumnSortingAccessor=(n,a)=>{const l=this.columnsDataSchema[a],r=n&&n[a];if(!l)return r;if(l.sortingDataAccessor)return l.sortingDataAccessor(n);if(l.valueType===f.DataValueType.Lookup){return r&&r.displayValue}return r},this.getMultiSelectColumnName=()=>"_multiSelectColumn",this.getRowExpanderColumnName=()=>"_rowExpanderColumn",this.trackByFunction=(n,a)=>this.trackRecord(a),this.config=z}_applyConfig(e){Z.forEach(n=>{const a=n,l=n,r=e[a],d=this[l];void 0!==r&&!(0,x.A)(r,d)&&(this[l]=e[a])})}trackRecord(e){return this._dataSchema?.trackBy?this._dataSchema.trackBy(e):e}trackRecords(e){return e?.map(n=>this.trackRecord(n))}isRecordInTable(e){return this.data.some(n=>this.trackRecord(n)===e)}deselectRedundant(){if(!this.dataSource)return null;const e=this.trackRecordsAreNotInTable(this.selection.selected);return 0!==e.length&&this.selection.deselect(...e),e}collapseRedundant(){if(!this.dataSource)return null;const e=this.trackRecordsAreNotInTable(this.expansion.selected);return 0!==e.length&&this.expansion.deselect(...e),e}deselectExcluding(...e){if(!this.data||!this.selection.hasValue())return;const a=this.trackRecordsExceptExcluded(e);this.selection.deselect(...a)}collapseExcluding(...e){const n=this.trackRecordsExceptExcluded(e);this.expansion.deselect(...n)}changeSelectionForRecords(e,n){e?this.selection.select(...n):this.selection.deselect(...n)}initDataSource(e){(e=e||new c.Nf).sortingDataAccessor=this.getColumnSortingAccessor,e.connect().subscribe(n=>{this.renderedDataTrackValues=this.trackRecords(n),this.deselectRedundant()?.length>0&&this.emitSelectionChange(),this.collapseRedundant()?.length>0&&this.emitExpandedChange(),this.markForCheck(),this.calculateMinWidth()}),this._dataSource=e}markForCheck(){this.changeDetectorRef.markForCheck()}emitSelectionChange(){this.selectedChange.emit(this.selected)}emitExpandedChange(){this.expandedChange.emit(this.expanded)}selectSingleRecord(e){this.deselectExcluding(e),this.selection.select(e),this.emitSelectionChange()}validateColumnEventHandlers(){const e=Object.keys(this.eventHandlers),n=this._dataSchema.expandableRow;let a=e.find(l=>!this.columnsDataSchema[l]);if(n&&a===n.name&&(a=null),a){const l=Object.keys(this.columnsDataSchema).join(", ");throw new Error(`Event handlers for column "${a}" can not be specified because the column was not defined in table data schema. Actual table columns: ${l}.`)}}changeSelectionForRange(e){if(!this.renderedDataTrackValues||!this.lastSelectToggledRecord||this.lastSelectToggledRecord===e)return!1;const n=this.renderedDataTrackValues.indexOf(this.lastSelectToggledRecord),a=this.renderedDataTrackValues.indexOf(e);if(-1===n||-1===a)return!1;const l=this.renderedDataTrackValues.slice(Math.min(n,a),Math.max(n,a)+1);return this.changeSelectionForRecords(!this.selection.isSelected(e),l),this.lastSelectToggledRecord=e,this.emitSelectionChange(),!0}trackRecordsAreInTable(e){return this.dataSource?e.filter(n=>this.isRecordInTable(n)):e}trackRecordsAreNotInTable(e){return this.dataSource?e.filter(n=>!this.isRecordInTable(n)):e}trackRecordsExceptExcluded(e){const n=this.trackRecords(this.data);return e?n.filter(a=>!e.includes(a)):n}calculateMinWidth(){const e=this.minWidthPerColumn,n=this.dataSchema?.columns?.length??0,a=!this.isEmpty()&&e>0&&n>0;this.minWidth=a?e*n+"px":""}getColumnSpanClass(e){return e>0&&e<=24?`ts-column-span-${e}`:""}allRecordsSelected(){return this.dataSource&&this.selection.hasValue()&&this.selection.selected.length>=this.filteredData.length&&this.filteredData.every(this.isRecordSelected.bind(this))}getAllRowsSelectState(){let e;return this.allRowsSelectState&&(e=this.allRowsSelectState())?e:this.allRecordsSelected()?i.KI.All:this.isAnyRecordSelected()?i.KI.Intermediate:i.KI.None}ngOnChanges(){this.eventHandlers&&this.columnsDataSchema&&this.validateColumnEventHandlers(),this.calculateMinWidth()}isDataSchemaEmpty(){return!this.dataSchema||!this.dataSchema.columns||0===this.dataColumns.length}isEmpty(){return this.isDataSchemaEmpty()||!this.renderedDataTrackValues||0===this.renderedDataTrackValues.length}recordSelectToggle(e){const n=this.trackRecord(e);this.selection.toggle(n),this.lastSelectToggledRecord=n,this.emitSelectionChange()}onSortChange(e){const n={columnName:e.active,direction:e.direction};this.sort=n,this.sortChange.emit(n)}isAnyRecordSelected(){return this.selection.hasValue()}isRecordSelected(e){return this.selection.isSelected(this.trackRecord(e))}isRecordExpanded(e){return this.expansion.isSelected(this.trackRecord(e))}isAllRowsCheckboxChecked(){return this.getAllRowsSelectState()===i.KI.All}isAllRowsCheckboxIntermediate(){return this.getAllRowsSelectState()===i.KI.Intermediate}allRowsSelectToggle(){if("multi"!==this.selectMode)throw new RangeError("Multi-select mode should be enabled to select all records.");if(this.allRowsSelectToggleHandler)this.allRowsSelectToggleHandler();else{const e=!this.isAllRowsCheckboxChecked();this.changeSelectionForRecords(e,this.trackRecords(this.filteredData)),this.emitSelectionChange()}}onRowClick(e){"single"===this.selectMode&&this.selectSingleRecord(this.trackRecord(e))}onRowDoubleClick(e){this.rowDoubleClick.emit(e)}getValueTypeCssClass(e){return"ts-value-type-"+(e&&f.DataValueType[e].toString().toLowerCase())}getColumnHeaderCssClass(e,n){return[this.getValueTypeCssClass(e),this.getColumnSpanClass(n)].filter(a=>!!a)}getRowCssClass(e,n){const a=[];n&&a.push(this.evenRowCssClass),"single"===this.selectMode&&this.isRecordSelected(e)&&a.push(this.selectedRowCssClass);const l="function"==typeof this.dataSchema.rowCssClass?this.dataSchema.rowCssClass(e):this.dataSchema.rowCssClass;return l&&a.push(l),a}isColumnSortable(e){return!(!e.caption||this.enableOrdering)&&(this.sortable?!1!==e.sortable:!0===e.sortable)}onCheckboxClick(e,n){const a=this.trackRecord(e);n.shiftKey&&this.changeSelectionForRange(a)&&n.preventDefault(),n.stopPropagation()}toggleRowExpansion(e,n){if(n.stopPropagation(),!this.dataSchema.expandableRow)throw new Error("An expandable cell must be set for this operation");this.expansion.toggle(this.trackRecord(e)),this.emitExpandedChange()}onCellValueChange(e,n,a){this.data=this.data,this.cellValueChange.emit({record:e,columnDataSchema:n,value:a})}onItemDrop(e){const n=this.data.indexOf(e.item.data);(0,h.HD)(this.data,n,e.currentIndex),this.data=this.data;const a={record:e.item.data,newIndex:e.currentIndex,prevIndex:n};this.recordPositionChange.emit(a)}static{this.\u0275fac=function(n){return new(n||g)(t.\u0275\u0275directiveInject(t.ChangeDetectorRef))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:g,selectors:[["ts-table"]],viewQuery:function(n,a){if(1&n&&t.\u0275\u0275viewQuery(p.B4,5),2&n){let l;t.\u0275\u0275queryRefresh(l=t.\u0275\u0275loadQuery())&&(a.matSort=l.first)}},hostVars:2,hostBindings:function(n,a){2&n&&t.\u0275\u0275styleProp("min-width",a.minWidth)},inputs:{dataSchema:"dataSchema",selectMode:"selectMode",headerSticky:"headerSticky",showHeader:"showHeader",showSelectAllButton:"showSelectAllButton",sortable:"sortable",sortColumn:"sortColumn",sortDirection:"sortDirection",selectedRowCssClass:"selectedRowCssClass",evenRowCssClass:"evenRowCssClass",minWidthPerColumn:"minWidthPerColumn",enableOrdering:"enableOrdering",dragBoundarySelector:"dragBoundarySelector",rowExpanderPosition:"rowExpanderPosition",selected:"selected",expanded:"expanded",sort:"sort",data:"data",dataSource:"dataSource",eventHandlers:"eventHandlers",config:"config",allRowsSelectState:"allRowsSelectState",allRowsSelectToggleHandler:"allRowsSelectToggleHandler"},outputs:{cellValueChange:"cellValueChange",selectedChange:"selectedChange",sortChange:"sortChange",expandedChange:"expandedChange",recordPositionChange:"recordPositionChange",rowDoubleClick:"rowDoubleClick"},features:[t.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["mat-table","","matSort","","matSortDisableClear","","multiTemplateDataRows","","cdkDropList","",3,"display","dataSource","matSortDirection","matSortActive","cdkDropListDisabled","trackBy","matSortChange","cdkDropListDropped",4,"ngIf"],["mat-table","","matSort","","matSortDisableClear","","multiTemplateDataRows","","cdkDropList","",3,"matSortChange","cdkDropListDropped","dataSource","matSortDirection","matSortActive","cdkDropListDisabled","trackBy"],[3,"matColumnDef"],[4,"ngIf"],["mat-cell","","class","multi-select-column",4,"matCellDef"],["mat-cell","","class","row-expander-column",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","expandableRow"],["mat-cell","",3,"ngClass",4,"matCellDef"],["mat-row","","cdkDragLockAxis","y","cdkDrag","",3,"ngClass","cdkDragData","cdkDragBoundary","cdkDragDisabled","click","dblclick",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","class","multi-select-column",4,"matHeaderCellDef"],["mat-header-cell","",1,"multi-select-column"],[3,"change","checked","indeterminate"],["mat-cell","",1,"multi-select-column"],[3,"click","change","checked"],["mat-header-cell","","class","row-expander-column",4,"matHeaderCellDef"],["mat-header-cell","",1,"row-expander-column"],["mat-cell","",1,"row-expander-column"],[1,"trigger-button",3,"click"],[3,"ngClass"],[3,"matColumnDef",4,"ngIf"],["mat-header-cell","","mat-sort-header","",3,"disabled","ngClass",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header","",3,"disabled","ngClass"],["mat-cell","",3,"ngClass"],[3,"valueChange","columnDataSchema","record","eventHandlers"],[1,"expandable-row-wrapper"],[3,"columnDataSchema","record","eventHandlers"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-header-row",""],["mat-row","","cdkDragLockAxis","y","cdkDrag","",3,"click","dblclick","ngClass","cdkDragData","cdkDragBoundary","cdkDragDisabled"],["mat-row","","class","expandable-row",4,"matRowDef","matRowDefColumns"],["mat-row","",1,"expandable-row"]],template:function(n,a){1&n&&t.\u0275\u0275template(0,K,13,15,"table",0),2&n&&t.\u0275\u0275property("ngIf",!a.isDataSchemaEmpty())},dependencies:[b.NgClass,b.NgForOf,b.NgIf,h.O7,h.T1,R.An,y.NZ,p.B4,p.aE,c.MS,c.Aw,c.mS,c.j4,c.lM,c.p_,c.bO,c.cK,c.BE,c.OP,u],styles:["ts-table{display:inline-block;width:100%}ts-table table{width:100%}ts-table table tr.expandable-row{height:auto}ts-table table tr.expandable-row td.expandable-cell-collapsed{border-bottom:hidden}ts-table table tr td,ts-table table tr th{overflow:hidden}ts-table table tr td:not(.multi-select-column,.row-expander-column),ts-table table tr th:not(.multi-select-column,.row-expander-column){width:auto}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-1,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-1{width:4.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-2,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-2{width:8.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-3,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-3{width:12.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-4,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-4{width:16.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-5,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-5{width:20.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-6,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-6{width:25%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-7,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-7{width:29.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-8,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-8{width:33.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-9,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-9{width:37.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-10,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-10{width:41.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-11,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-11{width:45.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-12,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-12{width:50%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-13,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-13{width:54.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-14,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-14{width:58.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-15,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-15{width:62.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-16,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-16{width:66.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-17,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-17{width:70.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-18,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-18{width:75%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-19,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-19{width:79.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-20,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-20{width:83.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-21,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-21{width:87.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-22,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-22{width:91.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-23,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-23{width:95.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-24,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-24{width:100%}ts-table table tr td:not(:first-of-type),ts-table table tr th:not(:first-of-type){padding-left:5px}ts-table table tr td:not(:last-of-type),ts-table table tr th:not(:last-of-type){padding-right:5px}ts-table table tr td.multi-select-column,ts-table table tr th.multi-select-column{padding-right:10px;width:16px!important;text-align:center;overflow:visible!important}ts-table table tr td.multi-select-column mat-checkbox .mat-checkbox-ripple,ts-table table tr th.multi-select-column mat-checkbox .mat-checkbox-ripple{overflow:visible;position:absolute;left:calc(50% - 16px);top:calc(50% - 16px);height:32px;width:32px}ts-table table tr td.multi-select-column mat-checkbox .mat-checkbox-ripple .mat-ripple-element:not(.mat-checkbox-persistent-ripple),ts-table table tr th.multi-select-column mat-checkbox .mat-checkbox-ripple .mat-ripple-element:not(.mat-checkbox-persistent-ripple){display:none}ts-table table tr td.row-expander-column .trigger-button,ts-table table tr th.row-expander-column .trigger-button{background:none;border:none}ts-table table tr td.row-expander-column .trigger-button:focus,ts-table table tr th.row-expander-column .trigger-button:focus{background:none;border:none;outline:none}ts-table table tr td.row-expander-column .trigger-button .row-expander-icon,ts-table table tr th.row-expander-column .trigger-button .row-expander-icon{background-image:url(\"data:image/svg+xml,%3Csvg id='Component_447' data-name='Component 447' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath id='Path_1315' data-name='Path 1315' d='M7,13,0,6.5,7,0' transform='translate(14.549 4.25) rotate(90)' fill='none' stroke='%23006ce0' stroke-width='1.1'/%3E%3Crect id='Rectangle_6725' data-name='Rectangle 6725' width='16' height='16' fill='none'/%3E%3C/svg%3E%0A\");background-position:center}ts-table table tr td.row-expander-column .trigger-button .row-expander-icon.collapsed,ts-table table tr th.row-expander-column .trigger-button .row-expander-icon.collapsed{transform:rotate(-180deg)}ts-table table tr td .expandable-row-wrapper,ts-table table tr th .expandable-row-wrapper{display:flex}ts-table table tr td .expandable-row-wrapper ts-table-cell-wrapper,ts-table table tr th .expandable-row-wrapper ts-table-cell-wrapper{width:100%;margin:10px 0}ts-table table tr th.ts-value-type-boolean .mat-sort-header-container{justify-content:center;padding-left:21px}ts-table table tr td.ts-value-type-boolean{text-align:center}\n"],encapsulation:2,data:{animation:[(0,m.hZ)("expandableRowTrigger",[(0,m.wk)("collapsed",(0,m.iF)({height:"0px",minHeight:"0"})),(0,m.wk)("expanded",(0,m.iF)({height:"unset"}))]),(0,m.hZ)("rowExpanderTrigger",[(0,m.kY)("collapsed <=> expanded",[(0,m.iF)({transform:"rotate(180deg)",opacity:0})])])]},changeDetection:0})}}var v=s(33227);const U=["angularTreeGrid"];class C{constructor(){this._config={id_field:"id",parent_id_field:"parent",parent_display_field:"name",data_loading_text:"",row_class_function:null,css:{expand_class:"right-arrow",collapse_class:"down-arrow"},columns:[]},this._notImplementedContracts=["sortable","valueType","linkGenerator","sortingDataAccessor"],this.data=[]}set primaryColumn(e){this._config.id_field=e}set parentColumn(e){this._config.parent_id_field=e}set primaryDisplayColumn(e){this._config.parent_display_field=e}get config(){return this._config}_validateTreeTableColumnContract(e){const n=Object.getOwnPropertyNames(e);this._notImplementedContracts.forEach(a=>{if(-1!==n.indexOf(a))throw new Error(`Contract "${a}" in TreeTableColumnDataSchema not implemented.`)})}_rowLevelClassGenerator(e){return e.leaf?"leaf-level":"root-level"}_setColumnsConfig(e){const n=e.map(a=>(this._validateTreeTableColumnContract(a),{name:a.name,header:a.caption,css_class:"tree-table-column-"+a.name,renderer:a.formatter}));this._config.columns=n}_setRowCssClassGenerator(e){if(!this.dataSchema?.rowCssClass)return void(this._config.row_class_function=this._rowLevelClassGenerator);const n="function"==typeof this.dataSchema?.rowCssClass?this.dataSchema.rowCssClass:a=>this.dataSchema.rowCssClass;this._config.row_class_function=a=>[this._rowLevelClassGenerator(a),n(a)].join(" ")}get dataSchema(){return this._dataSchema}set dataSchema(e){this._dataSchema=e,e&&this._setColumnsConfig(e.columns),this._setRowCssClassGenerator(e)}collapseAll(){this.angularTreeGrid.collapseAll()}expandAll(){this.angularTreeGrid.expandAll()}static{this.\u0275fac=function(n){return new(n||C)}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:C,selectors:[["ts-tree-table"]],viewQuery:function(n,a){if(1&n&&t.\u0275\u0275viewQuery(U,5),2&n){let l;t.\u0275\u0275queryRefresh(l=t.\u0275\u0275loadQuery())&&(a.angularTreeGrid=l.first)}},inputs:{primaryColumn:"primaryColumn",parentColumn:"parentColumn",primaryDisplayColumn:"primaryDisplayColumn",data:"data",dataSchema:"dataSchema"},decls:2,vars:2,consts:[["angularTreeGrid",""],[1,"tree-table",3,"data","configs"]],template:function(n,a){1&n&&t.\u0275\u0275element(0,"db-angular-tree-grid",1,0),2&n&&t.\u0275\u0275property("data",a.data)("configs",a.config)},dependencies:[v.sj],styles:['ts-tree-table .tree-table table.db-tree-view{border:0;width:100%}ts-tree-table .tree-table .db-tree-view thead tr th,ts-tree-table .tree-table .db-tree-view tbody tr td{border-left-width:0;border-right-width:0;border-top-width:0}ts-tree-table .tree-table .db-tree-view thead tr th{font:400 13px/17px Bpmonline Open Sans,Regular,sans-serif;color:#999;font-size:13px;text-align:left}ts-tree-table .tree-table .db-tree-view tbody tr{line-height:normal}ts-tree-table .tree-table .db-tree-view tbody tr td{font:400 14px/19px Bpmonline Open Sans,Regular,sans-serif;font-size:14px;color:#000000de}ts-tree-table .tree-table .db-tree-view .root-level td:first-child{padding-left:10px}ts-tree-table .tree-table .db-tree-view .leaf-level{background:#fcfcfc 0% 0% no-repeat padding-box}ts-tree-table .tree-table .db-tree-view .leaf-level td:first-child{padding-left:25px}ts-tree-table .tree-table .right-arrow:before{color:#006ce0;border-style:solid;border-width:1px 1px 0 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;margin-bottom:6px}ts-tree-table .tree-table .down-arrow:before{color:#006ce0;border-style:solid;border-width:0 1px 1px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;margin-bottom:6px}\n'],encapsulation:2})}}var X=s(98961),Y=s(39959),J=s(86731);class w{static{this.\u0275fac=function(n){return new(n||w)}}static{this.\u0275mod=t.\u0275\u0275defineNgModule({type:w})}static{this.\u0275inj=t.\u0275\u0275defineInjector({imports:[v.N8,b.CommonModule,h.ad,X.wG,R.m_,y.Dy,p.NQ,c.GR,Y.iI,J.h,i.B4,i.B4]})}}}}]);