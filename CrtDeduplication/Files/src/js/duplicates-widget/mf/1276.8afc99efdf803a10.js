(self.webpackChunkapp_studio_enterprise_duplicates_widget=self.webpackChunkapp_studio_enterprise_duplicates_widget||[]).push([[1276,3308,927,8546,6165,2832,451,8070,5689,4260,1879,1421,8895],{8895:(D,p,d)=>{d.r(p),d.d(p,{EntityStageDataTableSliderConverter:()=>i,EntityStageProgressBarColorMapperService:()=>C,EntityStageSchemaFilterService:()=>t});var f=d(73308),v=d(5960),s=d(38495),u=d(59131);class C{constructor(){this._newPaletteColorsMap=[{oldColor:"#000000",newColor:"#181818"},{oldColor:"#999999",newColor:"#757575"},{oldColor:"#dfdfdf",newColor:"#D6D6D6"},{oldColor:"#ef7e63",newColor:"#E06F56"},{oldColor:"#c73920",newColor:"#D2310D"},{oldColor:"#eba793",newColor:"#E99886"},{oldColor:"#7f2910",newColor:"#B61303"},{oldColor:"#d1e9bd",newColor:"#85C280"},{oldColor:"#2c6018",newColor:"#035500"},{oldColor:"#64b8df",newColor:"#4D84E2"},{oldColor:"#3a8bb1",newColor:"#0058EF"},{oldColor:"#d4ebf6",newColor:"#80A7EB"},{oldColor:"#286581",newColor:"#0026BC"},{oldColor:"#6483c3",newColor:"#B87CCF"},{oldColor:"#46639f",newColor:"#7848EE"},{oldColor:"#d1dcf0",newColor:"#D6BEE3"},{oldColor:"#2b467e",newColor:"#4F43C2"},{oldColor:"#5bc8c4",newColor:"#95DBD1"},{oldColor:"#4ca6a3",newColor:"#00BFA5"},{oldColor:"#bfe8e7",newColor:"#D3F1ED"},{oldColor:"#327b78",newColor:"#009688"},{oldColor:"#f8d162",newColor:"#FFAC07"},{oldColor:"#d3ae46",newColor:"#FF8800"},{oldColor:"#fbe8b2",newColor:"#F9D68D"},{oldColor:"#a8882e",newColor:"#FF6534"},{oldColor:"#fbad43",newColor:"#FF795A"},{oldColor:"#cc8930",newColor:"#FF4013"},{oldColor:"#fdd6a1",newColor:"#FFA089"},{oldColor:"#a16a1f",newColor:"#FF1C06"},{oldColor:"#8e8eb7",newColor:"#566D83"},{oldColor:"#5e5684",newColor:"#0D2E4E"},{oldColor:"#e1deed",newColor:"#8697A7"},{oldColor:"#3c365b",newColor:"#031225"},{oldColor:"#309726",newColor:"#0B8500"},{oldColor:"#589928",newColor:"#0B8500"},{oldColor:"#8ecb60",newColor:"#54AA4D"},{oldColor:"#8A8A8A",newColor:"#757575"},{oldColor:"#2669DC",newColor:"#0058EF"},{oldColor:"#314D69",newColor:"#0D2E4E"},{oldColor:"#D95031",newColor:"#D2310D"}]}getStageColor(r){const e=this._newPaletteColorsMap.find(o=>o.oldColor===r)?.newColor;return e||r}static{this.\u0275fac=function(e){return new(e||C)}}static{this.\u0275prov=u.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac,providedIn:"root"})}}class t{getEntityStageSchemaByFilteredColumnValue(r,e){return r.find(o=>{if(!o.isActive||!o.isActiveVersion)return null;if(!o.filters)return o;const l=JSON.parse(o.filters),n=Object.values(l.items)[0];if(n.comparisonType===s.ComparisonType.Equal)return(n.rightExpressions||[]).map(c=>c?.parameter?.value?.value).filter(c=>!!c).includes(e)?o:null;if(n.comparisonType===s.ComparisonType.Is_null&&!e)return o})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=u.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"})}}let i=class{convert(r,e,o){var l=this;return(0,f.A)(function*(){if(!o)return null;const n=yield l._getTargetDCMSchemaData(o.schemas,o.filterColumnAttributePath,e),g=o.schemasData.find(a=>a.name===n?.name);return l._getSliderCellModel(r,g)})()}_getTargetDCMSchemaData(r,e,o){return(0,f.A)(function*(){const l=new t,n=yield o[e];return l.getEntityStageSchemaByFilteredColumnValue(r,n?.value)})()}_getSliderCellModel(r,e){if(!e||!r)return{color:"",value:0};const o=e.stages.filter(a=>!a.parentStageUId);let l=o.find(a=>a.stageRecordId===r.value),n=o.indexOf(l);if(n===-1){const a=e.stages.find(c=>c.stageRecordId===r.value);a&&(n=o.findIndex(c=>c.uId===a.parentStageUId),l=a)}const g=(n+1)*100/o.length;return{color:l?.color,value:g}}};i=(0,v.__decorate)([(0,s.CrtConverter)({type:"crt.ToEntityStageDataTableSliderConverterAsync"})],i)},73308:(D,p,d)=>{d.d(p,{A:()=>v});function f(s,u,C,t,i,w,r){try{var e=s[w](r),o=e.value}catch(l){C(l);return}e.done?u(o):Promise.resolve(o).then(t,i)}function v(s){return function(){var u=this,C=arguments;return new Promise(function(t,i){var w=s.apply(u,C);function r(o){f(w,t,i,r,e,"next",o)}function e(o){f(w,t,i,r,e,"throw",o)}r(void 0)})}}}}]);
