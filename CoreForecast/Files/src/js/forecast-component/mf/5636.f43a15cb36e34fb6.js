(self.webpackChunkapp_studio_enterprise_forecast=self.webpackChunkapp_studio_enterprise_forecast||[]).push([[5636,3255],{75636:(v,m,s)=>{s.r(m),s.d(m,{FormulaEditorControlPanelComponent:()=>a,FormulaEditorPanelModule:()=>d});var p=s(40297),c=s(50456),t=s(59131),u=s(28399);const f=["formulaEditorRef"];function _(i,n){if(i&1){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",7),t.\u0275\u0275listener("click",function(){const r=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.addToFormula(r))}),t.\u0275\u0275elementStart(1,"span"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()}if(i&2){const e=n.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.caption," ")}}function g(i,n){if(i&1){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275listener("click",function(){const r=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.addToFormula(r))}),t.\u0275\u0275elementStart(1,"span"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()}if(i&2){const e=n.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.caption," ")}}function C(i,n){if(i&1){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275listener("click",function(){const r=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.addToFormula(r))}),t.\u0275\u0275element(1,"ts-formula-operand-item",10),t.\u0275\u0275elementEnd()}if(i&2){const e=n.$implicit;t.\u0275\u0275advance(),t.\u0275\u0275property("caption",e.caption)("value",e.value)}}class a{constructor(){this.formulaChanged=new t.EventEmitter}get data(){return this._data||[]}set data(n){this._data=a._applyOperandsToData(n||[],this.operands)}get operators(){return this._operators}set operators(n){this._operators=n}get operands(){return this._operands||[]}set operands(n){this._operands=n,this._data=a._applyOperandsToData(this.data,this.operands)}get functions(){return this._functions}set functions(n){this._functions=n}static _changeCaption(n,e){const o=(0,u.assign)({},n,{caption:e});return new c.FormulaItem(o)}static _applyOperandsToData(n,e){const o=(0,u.keyBy)(e,"value");return n.map(r=>{const{caption:l}=o[r.value]||r;return a._changeCaption(r,l)})}addToFormula(n){this.formulaEditor.addItem(n)}handleFormulaChanged(n){this.formulaChanged.emit(n)}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["ts-formula-editor-control-panel"]],viewQuery:function(e,o){if(e&1&&t.\u0275\u0275viewQuery(f,7),e&2){let r;t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(o.formulaEditor=r.first)}},inputs:{data:"data",operators:"operators",operands:"operands",functions:"functions"},outputs:{formulaChanged:"formulaChanged"},decls:8,vars:4,consts:[["formulaEditorRef",""],[1,"formula-editor-control-panel"],[3,"itemsChanged","formulaData"],[1,"control-panel"],["class","operator-button control-panel-item",3,"click",4,"ngFor","ngForOf"],["class","function-button control-panel-item",3,"click",4,"ngFor","ngForOf"],["class","operands control-panel-item",3,"click",4,"ngFor","ngForOf"],[1,"operator-button","control-panel-item",3,"click"],[1,"function-button","control-panel-item",3,"click"],[1,"operands","control-panel-item",3,"click"],[3,"caption","value"]],template:function(e,o){if(e&1){const r=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",1)(1,"ts-formula-editor",2,0),t.\u0275\u0275listener("itemsChanged",function(h){return t.\u0275\u0275restoreView(r),t.\u0275\u0275resetView(o.handleFormulaChanged(h))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275template(4,_,3,1,"div",4)(5,g,3,1,"div",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",3),t.\u0275\u0275template(7,C,2,2,"div",6),t.\u0275\u0275elementEnd()()}e&2&&(t.\u0275\u0275advance(),t.\u0275\u0275property("formulaData",o.data),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",o.operators),t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",o.functions),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",o.operands))},dependencies:[p.NgForOf,c.FormulaOperandItemComponent,c.FormulaEditorComponent],styles:[".control-panel[_ngcontent-%COMP%]{width:100%;padding-top:.4em;font-family:Bpmonline Open Sans}.control-panel[_ngcontent-%COMP%]   .operator-button[_ngcontent-%COMP%]{margin:5px;width:30px;font-size:22px;text-align:center;color:#658cdd}.control-panel[_ngcontent-%COMP%]   .function-button[_ngcontent-%COMP%]{margin:5px;font-size:18px;text-align:center;color:#658cdd}.control-panel[_ngcontent-%COMP%]   .control-panel-item[_ngcontent-%COMP%]{display:inline-block;cursor:pointer;-webkit-user-select:none;user-select:none}"]})}}class d{static{this.\u0275fac=function(e){return new(e||d)}}static{this.\u0275mod=t.\u0275\u0275defineNgModule({type:d})}static{this.\u0275inj=t.\u0275\u0275defineInjector({imports:[p.CommonModule,c.FormulaEditorModule]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&t.\u0275\u0275setNgModuleScope(d,{declarations:[a],imports:[p.CommonModule,c.FormulaEditorModule],exports:[a]})})()}}]);
